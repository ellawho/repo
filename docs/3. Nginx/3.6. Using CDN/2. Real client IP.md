---
layout: default    
title: Restore Client IP
nav_order: 2
has_children: true
parent: Using CDN
grand_parent: Nginx
permalink: /nginx/using-cdn/restore-client-ip
has_toc: false
---

## Retrieving real client IP when proxy through a CDN service
{: .no_toc } 

<details open markdown="block">
  <summary>
    Table of contents
  </summary>
  {: .text-delta }
- TOC
{:toc}
</details>


## Restore real client IP 

```bash  
vim /etc/nginx/nginx.conf
    # add below to the bottom of the http { ... } block
```

## Set_real_ip_from CND IPs
```
http {
    set_real_ip_from 192.25.25.0/24;
    set_real_ip_from 192.25.25.0/24;
    set_real_ip_from 192.25.25.0/24;
    *** 
    real_ip_header     [CDN-custom-true-client-ip header name];
}
```